@model List<HotelBookingWebApp.DTOs.SearchEndpointDtos.HotelDto>

@{
    ViewData["Title"] = "Search";
}

<h2 class="text-2xl font-bold mb-6">Search Results</h2>

@if (Model != null)
{
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        @foreach (var hotel in Model)
        {
            <!-- Otel Kartı -->
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="flex flex-col">

                    <!-- Otel Görseli Carousel -->
                    <div id="carousel-@hotel.CardTitle?.HotelName" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            @if (hotel.CardPhotos != null)
                            {
                                var first = true;
                                foreach (var photo in hotel.CardPhotos)
                                {
                                    var imageUrl = photo.images != null
                                    ? photo.images.UrlTemplate.Replace("{width}", "600").Replace("{height}", "400")
                                    : "https://via.placeholder.com/400";

                                    <div class="carousel-item @(first ? "active" : "")">
                                        <img src="@imageUrl" class="d-block w-100 h-64 object-cover" alt="@hotel.CardTitle?.HotelName" />
                                    </div>

                                    first = false;
                                }
                            }
                            else
                            {
                                <div class="carousel-item active">
                                    <img src="https://via.placeholder.com/400" class="d-block w-100 h-64 object-cover" alt="No Image Available" />
                                </div>
                            }
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carousel-@hotel.CardTitle?.HotelName" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carousel-@hotel.CardTitle?.HotelName" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>

                    <!-- Otel Bilgileri -->
                    <div class="p-6 flex flex-col justify-between">
                        <div>
                            <h3 class="text-xl font-semibold mb-2">
                                @hotel.CardTitle?.HotelName
                            </h3>
                        </div>

                        <!-- Fiyat Bilgisi -->
                        <div class="mt-6 flex items-center justify-between">
                            <div>
                                <p class="text-2xl font-bold">
                                    @hotel.CommerceInfo?.PriceForDisplay?.Price
                                </p>
                                <p class="text-sm text-gray-600">per night</p>
                            </div>
                            <button class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
                                View deal
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        }
    </div>
}
else
{
    <p class="text-center text-gray-600 py-8">No results found.</p>
}

